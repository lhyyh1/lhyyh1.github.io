(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{297:function(s,a,n){"use strict";n.r(a);var e=n(9),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"notes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#notes"}},[s._v("#")]),s._v(" notes")]),s._v(" "),a("h2",{attrs:{id:"docker配置镜像加速器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker配置镜像加速器"}},[s._v("#")]),s._v(" docker配置镜像加速器")]),s._v(" "),a("blockquote",[a("p",[s._v("使用加速器可以提升获取Docker官方镜像的速度")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('1. docker配置文件目录/etc/docker\n2. 如果无配置文件,创建配置文件daemon.json\n3. 配置文件如下:\n参考: https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors?accounttraceid=7ab6846acf66447dae76a6606a677deeyejb\n{\n  #地址为阿里云加速器地址\n  "registry-mirrors": ["https://yg4swn7f.mirror.aliyuncs.com"]\n}\n4. 重启配置,重启docker生效\n4.1 systemctl daemon-reload\n>   重新加载某个服务的配置文件，如果新安装了一个服务，归属于 systemctl 管理，要是新服务的服务程序配置文件生效，需重新加载\n4.2 systemctl restart docker\n>   重启docker服务\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("h2",{attrs:{id:"centos8-2安装docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#centos8-2安装docker"}},[s._v("#")]),s._v(" Centos8.2安装docker")]),s._v(" "),a("blockquote",[a("p",[s._v("ubuntu 根据命令提示安装即可, centos需要注意一些细节")])]),s._v(" "),a("p",[s._v("Centos8.2安装参考: "),a("br"),s._v("\nhttps://blog.csdn.net/weixin_41887155/article/details/107232529")]),s._v(" "),a("h2",{attrs:{id:"docker基本命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker基本命令"}},[s._v("#")]),s._v(" docker基本命令")]),s._v(" "),a("h3",{attrs:{id:"查看docker版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看docker版本"}},[s._v("#")]),s._v(" 查看docker版本")]),s._v(" "),a("p",[a("code",[s._v("docker -v")])]),s._v(" "),a("h3",{attrs:{id:"查看版本详情"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看版本详情"}},[s._v("#")]),s._v(" 查看版本详情")]),s._v(" "),a("p",[a("code",[s._v("docker version")])]),s._v(" "),a("h3",{attrs:{id:"查看docker有关进程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看docker有关进程"}},[s._v("#")]),s._v(" 查看docker有关进程")]),s._v(" "),a("p",[a("code",[s._v("ps -ef | grep docker")])]),s._v(" "),a("h2",{attrs:{id:"docker启动-重启-停止命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker启动-重启-停止命令"}},[s._v("#")]),s._v(" docker启动|重启|停止命令")]),s._v(" "),a("h3",{attrs:{id:"systemctl-方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#systemctl-方式"}},[s._v("#")]),s._v(" systemctl 方式")]),s._v(" "),a("ul",[a("li",[s._v("设置开机自启动 "),a("code",[s._v("systemctl enable docker")])]),s._v(" "),a("li",[s._v("启动 "),a("code",[s._v("systemctl start docker")])]),s._v(" "),a("li",[s._v("重启 "),a("code",[s._v("systemctl restart docker")])]),s._v(" "),a("li",[s._v("停止 "),a("code",[s._v("systemctl stop docker")])]),s._v(" "),a("li",[s._v("重载所有修改过的配置文件 "),a("code",[s._v("systemctl daemon-reload")])])]),s._v(" "),a("h3",{attrs:{id:"service方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#service方式"}},[s._v("#")]),s._v(" service方式")]),s._v(" "),a("ul",[a("li",[s._v("启动 "),a("code",[s._v("service docker start")])]),s._v(" "),a("li",[s._v("停止 "),a("code",[s._v("service docker stop")])]),s._v(" "),a("li",[s._v("重启 "),a("code",[s._v("service docker restart")])])]),s._v(" "),a("h2",{attrs:{id:"镜像基本命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#镜像基本命令"}},[s._v("#")]),s._v(" 镜像基本命令")]),s._v(" "),a("h3",{attrs:{id:"镜像搜索命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#镜像搜索命令"}},[s._v("#")]),s._v(" 镜像搜索命令")]),s._v(" "),a("ul",[a("li",[s._v("搜索镜像nginx"),a("br"),s._v(" "),a("code",[s._v("docker search nginx")])]),s._v(" "),a("li",[s._v("搜索官方提供的nginx镜像"),a("br"),s._v(" "),a("code",[s._v('docker search --filter "is-official=true" nginx')])]),s._v(" "),a("li",[s._v("搜索自动化构建的nginx镜像"),a("br"),s._v(" "),a("code",[s._v('docker search --filter "is-automated=true" nginx')])]),s._v(" "),a("li",[s._v("搜索大于等于3颗星的nginx镜像"),a("br"),s._v(" "),a("code",[s._v("docker search --filter stars=3 nginx")])])]),s._v(" "),a("h3",{attrs:{id:"下载镜像命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#下载镜像命令"}},[s._v("#")]),s._v(" 下载镜像命令")]),s._v(" "),a("p",[a("code",[s._v("docker pull nginx")])]),s._v(" "),a("h3",{attrs:{id:"本地镜像查看"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#本地镜像查看"}},[s._v("#")]),s._v(" 本地镜像查看")]),s._v(" "),a("p",[a("code",[s._v("docker images")])]),s._v(" "),a("h3",{attrs:{id:"本地镜像删除"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#本地镜像删除"}},[s._v("#")]),s._v(" 本地镜像删除")]),s._v(" "),a("p",[a("code",[s._v("docker rmi nginx")])]),s._v(" "),a("h2",{attrs:{id:"容器的基本操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#容器的基本操作"}},[s._v("#")]),s._v(" 容器的基本操作")]),s._v(" "),a("h3",{attrs:{id:"容器创建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#容器创建"}},[s._v("#")]),s._v(" 容器创建")]),s._v(" "),a("p",[a("code",[s._v("docker run -itd --name=container_name image_name/镜像id")])]),s._v(" "),a("ul",[a("li",[s._v("-i 表示以交互模式运行容器")]),s._v(" "),a("li",[s._v("-d 表示后台运行容器, 并返回容器id")]),s._v(" "),a("li",[s._v("-t 为容器重新分配一个伪输入终端")]),s._v(" "),a("li",[s._v("–name为容器指定名称")]),s._v(" "),a("li",[s._v("注意: 一个镜像可以创建多个容器,只要名字不一样就可以")])]),s._v(" "),a("h3",{attrs:{id:"查看容器-运行中的"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看容器-运行中的"}},[s._v("#")]),s._v(" 查看容器(运行中的)")]),s._v(" "),a("p",[a("code",[s._v("docker ps")])]),s._v(" "),a("h3",{attrs:{id:"查看容器-包括已停止的"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看容器-包括已停止的"}},[s._v("#")]),s._v(" 查看容器(包括已停止的)")]),s._v(" "),a("p",[a("code",[s._v("docker ps -a")])]),s._v(" "),a("h3",{attrs:{id:"停止容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#停止容器"}},[s._v("#")]),s._v(" 停止容器")]),s._v(" "),a("p",[a("code",[s._v("docker stop container_name/container_id")])]),s._v(" "),a("h3",{attrs:{id:"启动容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动容器"}},[s._v("#")]),s._v(" 启动容器")]),s._v(" "),a("p",[a("code",[s._v("docker start container_name/container_id")])]),s._v(" "),a("h3",{attrs:{id:"重启容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#重启容器"}},[s._v("#")]),s._v(" 重启容器")]),s._v(" "),a("p",[a("code",[s._v("docker restart container_name/container_id")])]),s._v(" "),a("h3",{attrs:{id:"删除容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除容器"}},[s._v("#")]),s._v(" 删除容器")]),s._v(" "),a("blockquote",[a("p",[s._v("注意: 删除容器需要先停止容器"),a("br"),s._v(" "),a("code",[s._v("docker rm container_name/container_id")])])]),s._v(" "),a("h3",{attrs:{id:"进入容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进入容器"}},[s._v("#")]),s._v(" 进入容器")]),s._v(" "),a("p",[a("code",[s._v("docker exec -it container_name/container_id /bin/bash")])]),s._v(" "),a("h3",{attrs:{id:"退出容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#退出容器"}},[s._v("#")]),s._v(" 退出容器")]),s._v(" "),a("p",[a("code",[s._v("exit")])]),s._v(" "),a("h3",{attrs:{id:"容器提交修改"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#容器提交修改"}},[s._v("#")]),s._v(" 容器提交修改")]),s._v(" "),a("p",[a("code",[s._v('docker commit -a "author" -m "message" container_name/container_id new_image_name:tag_name')])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("参数说明:\n-a：参数可选，用于指定作者，可以写你的名字\n-m：参数可选，提交信息，可以说一下你做了哪些修改\ncontainer_id：该参数为被修改的容器ID\nnew_image_name：此为新镜像的名字，可自定义\ntag_name：此为新镜像的标签，可不写，不写时标签默认为latest\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("ul",[a("li",[s._v("修改完,停掉容器,重新启动,修改的内容还在;")]),s._v(" "),a("li",[s._v("容器删除了,再次通过镜像创建容器,如果没有把容器修改内容保存到镜像中,再次创建的容器没有修改的内容;")]),s._v(" "),a("li",[s._v("每个容器都很干净的,里面没有多余的命令,需要自己安装;")])]),s._v(" "),a("h3",{attrs:{id:"查看容器日志"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看容器日志"}},[s._v("#")]),s._v(" 查看容器日志")]),s._v(" "),a("blockquote",[a("p",[s._v("当容器启动或者运行中发现问题, 需要查看运行日志时使用")])]),s._v(" "),a("p",[a("code",[s._v("docker logs 容器id/容器名称")])]),s._v(" "),a("h2",{attrs:{id:"端口映射"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#端口映射"}},[s._v("#")]),s._v(" 端口映射")]),s._v(" "),a("blockquote",[a("p",[s._v("解决的是客户端发送过来的请求和容器之间的交互")])]),s._v(" "),a("p",[a("code",[s._v("docker run -itd -p 宿主机端口号:容器端口号 + 镜像名字/镜像id")])]),s._v(" "),a("h2",{attrs:{id:"文件挂载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#文件挂载"}},[s._v("#")]),s._v(" 文件挂载")]),s._v(" "),a("blockquote",[a("p",[s._v("解决的是宿主机和容器之间的交互;"),a("br"),s._v("\n文件挂载和复制都要用绝对路径;"),a("br"),s._v("\n文件挂载的意义:本地代码或者文件通过容器挂载的方式,放到容器里面,交由其来运行;")])]),s._v(" "),a("p",[a("code",[s._v("docker run -itd -v /宿主机/文件目录/文件名:/容器/目录/文件名")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#   例子:\n1. docker run -itd --name=nginx -p 80:80 -v /wwwroot/html:/usr/share/nginx/html nginx\n2. docker run -itd --name=nginx -p 80:80 -v /wwwroot/:/usr/share/nginx/html/ 584256c85bdd\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"文件挂载举例实证"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#文件挂载举例实证"}},[s._v("#")]),s._v(" 文件挂载举例实证")]),s._v(" "),a("ul",[a("li",[s._v("宿主机把不存在的文件挂载到存在该文件的容器, 挂载后容器启动失败;")]),s._v(" "),a("li",[s._v("宿主机把本地不存在的文件夹挂载到容器内存在的文件夹,会用一个空的文件夹覆盖容器原有的文件夹,启动启动正常,但容器内对应的目录被清空;")]),s._v(" "),a("li",[s._v("宿主机存在文件挂载到容器不存在文件,挂载成功,容器内多一个挂载文件;")]),s._v(" "),a("li",[s._v("宿主机存在文件夹挂载到容器不存在文件夹,挂载成功,容器内多一个文件夹;")]),s._v(" "),a("li",[s._v("宿主机文件夹挂载到容器文件,启动失败;")]),s._v(" "),a("li",[s._v("同名文件夹挂载,启动成功, 宿主机文件夹会覆盖容器内部的文件夹")]),s._v(" "),a("li",[s._v("同名文件挂载,启动成功,宿主机会覆盖容器的文件")]),s._v(" "),a("li",[s._v("宿主机文件挂载到容器文件夹,启动失败;")])]),s._v(" "),a("h2",{attrs:{id:"文件复制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#文件复制"}},[s._v("#")]),s._v(" 文件复制")]),s._v(" "),a("blockquote",[a("p",[s._v("文件挂载和复制都要用绝对路径")])]),s._v(" "),a("h3",{attrs:{id:"将容器的文件复制到本地"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#将容器的文件复制到本地"}},[s._v("#")]),s._v(" 将容器的文件复制到本地")]),s._v(" "),a("p",[a("code",[s._v("docker cp 容器名:/容器目录/文件名 /宿主机目录/文件名")])]),s._v(" "),a("h3",{attrs:{id:"将本地的文件复制到容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#将本地的文件复制到容器"}},[s._v("#")]),s._v(" 将本地的文件复制到容器")]),s._v(" "),a("p",[a("code",[s._v("docker cp /宿主机目录/文件名 容器名:/容器目录/文件名")])]),s._v(" "),a("h2",{attrs:{id:"容器互联"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#容器互联"}},[s._v("#")]),s._v(" 容器互联")]),s._v(" "),a("blockquote",[a("p",[s._v("解决的是容器与容器之间的交互")])]),s._v(" "),a("p",[a("code",[s._v("docker run -itd --link 被关联的容器名字:被关联的容器的别名")])]),s._v(" "),a("h2",{attrs:{id:"细品docker技术"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#细品docker技术"}},[s._v("#")]),s._v(" 细品docker技术")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("docker的容器,容器启动之后,会自动运行容器里面的服务;类似nginx, nginx启动之后,我们会得到一个运行nginx软件的虚拟机; nginx是运行在容器里面的,对外提供服务的是我们的服务器, 这里的服务器可以理解为我们的***宿主机***;")])]),s._v(" "),a("li",[a("p",[s._v("给用户提供的访问,是宿主机在提供,而不是容器再提供,那我们怎么把用户的请求,,请求到宿主机之后,自动分配给容器呢?  "),a("code",[s._v("这个就是端口映射的操作;")])])]),s._v(" "),a("li",[a("p",[s._v("端口映射就是把宿主机的80端口和容器的80端口两者之间关联起来;用户的所有请求到了宿主机的80端口就会自动被转发到容器的80端口;这样一来,我们所有的http请求到了宿主机之后,就会被容器里面的nginx接收到进行处理;")])]),s._v(" "),a("li",[a("p",[s._v("docker里面的容器, 每一个容器都提供一种服务; 它不是一个容器里面提供所有的服务; 我们不会在一个服务里面, 把php, mysql, nginx都装进去, 为什么呢? "),a("code",[s._v("分开装的好处便于切换版本, 不需要动环境的东西,只需要装一个新版的容器, 切换一下容器就可以了;")])])])]),s._v(" "),a("h2",{attrs:{id:"容器定时任务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#容器定时任务"}},[s._v("#")]),s._v(" 容器定时任务")]),s._v(" "),a("blockquote",[a("p",[s._v("eg: 宿主机执行php容器定时任务")])]),s._v(" "),a("p",[a("code",[s._v("1 * * * * docker exec 容器ID php php文件")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker exec php容器ID php /var/www/html/api/artisan schedule:run >> /dev/null 2>&1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"举例-nginx容器安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#举例-nginx容器安装"}},[s._v("#")]),s._v(" 举例: nginx容器安装")]),s._v(" "),a("h3",{attrs:{id:"容器创建-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#容器创建-2"}},[s._v("#")]),s._v(" 容器创建")]),s._v(" "),a("p",[a("code",[s._v("docker run -itd --name=container_name 镜像id")])]),s._v(" "),a("h3",{attrs:{id:"进入容器查看nginx配置-日志-根目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进入容器查看nginx配置-日志-根目录"}},[s._v("#")]),s._v(" 进入容器查看nginx配置,日志,根目录")]),s._v(" "),a("p",[a("code",[s._v("docker exec -it container_id /bin/bash")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("容器中 nginx配置文件在/etc/nginx/ 目录下面;\n容器中 nginx日志在/var/log/nginx/ 目录下面;\n容器中 nginx根目录在/usr/share/nginx/html/ 目录下面\n\n特别注意: 本地挂载到容器后, 会清空或者覆盖对应的容器目录,具体规则自己体会;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h3",{attrs:{id:"创建本地宿主机挂载目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建本地宿主机挂载目录"}},[s._v("#")]),s._v(" 创建本地宿主机挂载目录")]),s._v(" "),a("p",[a("code",[s._v("mkdir -p /data/nginx/{conf,html,logs}")])]),s._v(" "),a("h3",{attrs:{id:"拷贝容器中nginx所有配置文件到本地"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#拷贝容器中nginx所有配置文件到本地"}},[s._v("#")]),s._v(" 拷贝容器中nginx所有配置文件到本地")]),s._v(" "),a("p",[a("code",[s._v("docker cp 容器名:/容器目录/文件名 /宿主机目录/文件名")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker cp 45744:/etc/nginx /data/nginx/conf\n很多人启动容器报错,就是因为没有这一步,挂载覆盖目录问题;\n\n上面例子表示:拷贝容器中目录nginx放到宿主机/data/nginx/conf目录下面;\n\n上面创建的容器只是为了查看对应配置的位置,查看后可以删除了;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h3",{attrs:{id:"创建容器-映射端口-挂载配置文件目录和项目根目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建容器-映射端口-挂载配置文件目录和项目根目录"}},[s._v("#")]),s._v(" 创建容器,映射端口, 挂载配置文件目录和项目根目录")]),s._v(" "),a("p",[a("code",[s._v("docker run -itd --name=nginx -p 80:80 -v /data/nginx/html:/usr/share/nginx/html -v /data/nginx/conf/nginx:/etc/nginx -v /data/nginx/logs:/var/log/nginx 2622")])]),s._v(" "),a("h3",{attrs:{id:"验证"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#验证"}},[s._v("#")]),s._v(" 验证")]),s._v(" "),a("ul",[a("li",[s._v("在本地/data/nginx/html目录下写一个index.html文件,能访问就正常了;")]),s._v(" "),a("li",[s._v("如果docker ps发现容器未启动, 就要思考你的挂载和我的挂载的区别了;")]),s._v(" "),a("li",[s._v("如果不能访问,查看本地防火墙是否开通80端口;")])]),s._v(" "),a("h2",{attrs:{id:"docker-compose-容器编排"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose-容器编排"}},[s._v("#")]),s._v(" docker-compose 容器编排")]),s._v(" "),a("blockquote",[a("p",[s._v("lnmp环境安装\n参考:"),a("br")])]),s._v(" "),a("ol",[a("li",[s._v("https://gitee.com/zenglingchuan/docker-compose-environment")]),s._v(" "),a("li",[s._v("https://www.jianshu.com/p/d15c4e5239da")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('# docker-compose.yml文件的版本\nversion: "3"\n# 管理的服务\nservices: \n  php:\n    hostname: php #指定容器的主机名\n    restart: always #当值为 always 时，容器总是重新启动\n    container_name: php #为自定义的容器指定一个名称，而不是使用默认的名称\n    image: registry.cn-chengdu.aliyuncs.com/php-version/php-redis-pdo_mysql:v-1 #已经构建好的php 7.4.8\n    # build: \n    #   context: ./docker/php \n    #   dockerfile: Dockerfile \n    depends_on:\n      - mysql\n      - redis\n    ports:\n      - "9000:9000" \n    links: \n      - mysql:mysql #指定服务容器名称:别名;避免ip方式导致的容器重启动态改变的无法连接情况\n      - redis:redis \n    volumes: #容器目录  ro 容器只读; rw容器对数据卷是可读可写; 默认rw\n      - ${NGINX_HTML}:/var/www/html\n      - ./docker/php/php-config:/usr/local/etc   \n    working_dir: /var/www/html\n  nginx:\n    hostname: nginx\n    restart: always\n    container_name: nginx\n    image: nginx:1.19.2\n    ports:\n      - "80:80"\n      - "443:443"\n    depends_on:\n      - nginx_api\n    links:\n      - "nginx_api:nginx_api"\n    volumes:\n      - ./docker/nginx/nginx-html:/usr/share/nginx/html\n      - ./docker/nginx/nginx-config:/etc/nginx\n      - ./docker/nginx/nginx-log:/var/log/nginx\n    working_dir: /usr/share/nginx/html\n  nginx_api:\n    hostname: nginx\n    restart: always\n    container_name: nginx_api\n    image: nginx:1.19.2\n    ports:\n      - "8080:80"\n    depends_on:\n      - php      \n    links:\n      - "php:php"\n    volumes:   \n      - ${NGINX_HTML}:/usr/share/nginx/html\n      - ./docker/nginx-api/nginx-config:/etc/nginx\n      - ./docker/nginx-api/nginx-log:/var/log/nginx\n    working_dir: /usr/share/nginx/html\n  mysql:\n    hostname: mysql\n    restart: always\n    container_name: mysql\n    image: mysql:8.0.21   \n    ports:\n      - "${MYSQL_PORTS}:3306"\n    volumes:   \n      - ./docker/mysql/database:/var/lib/mysql  \n      - ./docker/mysql/mysql-config/mysql.cnf:/etc/mysql/conf.d/mysql.cnf:ro \n      - ./docker/mysql/shell:/docker-entrypoint`-initdb.d\n    environment:\n      MYSQL_ROOT_PASSWORD: ${MYSQL_ROOT_PASSWORD}     \n  redis:\n    hostname: redis\n    restart: always\n    container_name: redis\n    image: redis:alpine3.12\n    command: redis-server /etc/redis/redis.conf #容器启动后默认执行命令\n    ports:\n      - "6379:6379"   \n    volumes:   \n      - ./docker/redis/data:/data \n      - ./docker/redis/redis-config:/etc/redis \n    environment:\n      - TZ=Asia/Shanghai\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br")])]),a("h2",{attrs:{id:"docker-compose-常用指令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose-常用指令"}},[s._v("#")]),s._v(" docker-compose 常用指令")]),s._v(" "),a("h3",{attrs:{id:"启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动"}},[s._v("#")]),s._v(" 启动")]),s._v(" "),a("p",[a("code",[s._v("docker-compose up -d")])]),s._v(" "),a("h3",{attrs:{id:"重启"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#重启"}},[s._v("#")]),s._v(" 重启")]),s._v(" "),a("p",[a("code",[s._v("docker-compose restart")])]),s._v(" "),a("h3",{attrs:{id:"重启某一个容器nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#重启某一个容器nginx"}},[s._v("#")]),s._v(" 重启某一个容器nginx")]),s._v(" "),a("p",[a("code",[s._v("docker-compose restart nginx")])]),s._v(" "),a("h3",{attrs:{id:"停止所有容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#停止所有容器"}},[s._v("#")]),s._v(" 停止所有容器")]),s._v(" "),a("p",[a("code",[s._v("docker-compose stop")])]),s._v(" "),a("h3",{attrs:{id:"删除所有容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除所有容器"}},[s._v("#")]),s._v(" 删除所有容器")]),s._v(" "),a("p",[a("code",[s._v("docker-compose rm")])]),s._v(" "),a("h3",{attrs:{id:"查看容器里面的日志"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看容器里面的日志"}},[s._v("#")]),s._v(" 查看容器里面的日志")]),s._v(" "),a("p",[a("code",[s._v("docker-compose logs -f nginx")])]),s._v(" "),a("h3",{attrs:{id:"验证容器内composer安装情况"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#验证容器内composer安装情况"}},[s._v("#")]),s._v(" 验证容器内composer安装情况")]),s._v(" "),a("p",[a("code",[s._v("docker exec 容器id composer")])]),s._v(" "),a("h3",{attrs:{id:"验证php容器内扩展安装情况"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#验证php容器内扩展安装情况"}},[s._v("#")]),s._v(" 验证php容器内扩展安装情况")]),s._v(" "),a("p",[a("code",[s._v("docker exec 容器id php -m")])]),s._v(" "),a("h3",{attrs:{id:"在宿主机中下执行项目composer-install"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在宿主机中下执行项目composer-install"}},[s._v("#")]),s._v(" 在宿主机中下执行项目composer install")]),s._v(" "),a("p",[a("code",[s._v("docker exec 容器id composer install")])]),s._v(" "),a("h2",{attrs:{id:"docker处理占用空间过大问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker处理占用空间过大问题"}},[s._v("#")]),s._v(" docker处理占用空间过大问题")]),s._v(" "),a("ul",[a("li",[s._v("https://blog.csdn.net/qq_28001193/article/details/79555177")])])])}),[],!1,null,null,null);a.default=r.exports}}]);