(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{307:function(s,a,t){"use strict";t.r(a);var e=t(9),n=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx"}},[s._v("#")]),s._v(" nginx")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("p",[s._v("整理一些常用的nginx技巧, 以便后面查阅, 好记性不如烂笔头!")])]),s._v(" "),a("h2",{attrs:{id:"命令连接符"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#命令连接符"}},[s._v("#")]),s._v(" 命令连接符")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("p",[s._v("一般情况下, 我们常用"),a("code",[s._v("&&")]),s._v(", 用来保证每条命令都顺利执行")])]),s._v(" "),a("h3",{attrs:{id:""}},[a("a",{staticClass:"header-anchor",attrs:{href:"#"}},[s._v("#")]),s._v(" "),a("code",[s._v("&&")])]),s._v(" "),a("p",[s._v("语法格式:")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("command1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" command2\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),a("p",[a("code",[s._v("&&")]),s._v("左边的command1执行成功(返回0表示成功)后，"),a("code",[s._v("&&")]),s._v("右边的command2才能被执行")])]),s._v(" "),a("h3",{attrs:{id:"-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#-2"}},[s._v("#")]),s._v(" "),a("code",[s._v(";")])]),s._v(" "),a("p",[s._v("每个命令之间用"),a("code",[s._v(";")]),s._v("隔开, 不会影响其它命令的执行, 换句话说, 各个命令都会执行, 但不保证每个命令都执行")]),s._v(" "),a("h3",{attrs:{id:"-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#-3"}},[s._v("#")]),s._v(" "),a("code",[s._v("||")])]),s._v(" "),a("p",[s._v("每个命令之间用"),a("code",[s._v("||")]),s._v("隔开, "),a("code",[s._v("||")]),s._v("是或的意思, 只有前面的命名执行失败后才去执行下一条命名, 指到执行成功一条命令为止")]),s._v(" "),a("h2",{attrs:{id:"shell脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#shell脚本"}},[s._v("#")]),s._v(" shell脚本")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),a("ol",[a("li",[s._v("date和后面的"),a("code",[s._v("+")]),s._v("之间有空格")]),s._v(" "),a("li",[s._v("示例是 Shell 脚本一次性执行多条语句，并可以统计时间")])])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#! /bin/bash")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("startTime")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" +%Y%m%d-%H:%M"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 脚本执行的开始时间")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("startTime_s")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" +%s"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 秒")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /wwwroot "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 切换到/wwwroot目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建test目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 切换到test目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示当前工作目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("endTime")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" +%Y%m%d-%H:%M"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("endTime_s")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" +%s"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("sumTime")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$endTime_s")]),s._v(" - "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$startTime_s")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# $[] ：用于整数运算")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# echo shell中输出变量")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$startTime")]),s._v(" ----\x3e  "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$endTime")]),s._v('"')]),s._v("  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Totl: '),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$sumTime")]),s._v(' seconds"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("h2",{attrs:{id:"test-sh和source-test-sh区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#test-sh和source-test-sh区别"}},[s._v("#")]),s._v(" ./test.sh和source test.sh区别")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("区别")]),s._v(" "),a("ol",[a("li",[a("p",[a("code",[s._v("./test.sh")]),s._v(" 重新建立一个子shell，在子shell中执行脚本里面的语句，该子shell继承父shell的环境变量，但子shell新建的、改变的变量不会被带回父shell，除非使用")])]),s._v(" "),a("li",[a("p",[s._v("source test.sh 这个命令其实只是简单地读取脚本里面的语句依次在当前shell里面执行，没有建立新的子shell。那么脚本里面所有新建、改变变量的语句都会保存在当前shell里")])])])]),s._v(" "),a("h2",{attrs:{id:"文件权限问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#文件权限问题"}},[s._v("#")]),s._v(" 文件权限问题")]),s._v(" "),a("div",{staticClass:"language-text line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(" ypy@ubuntu:~$ ls -l\n754    drwxr-xr--  2 ypy  ypy     4096 Nov 30 18:33 Desktop/\n754    drwxr-xr--  2 ypy  ypy     4096 Nov 30 18:33 Documents/\n754    drwxr-xr--  2 ypy  ypy     4096 Dec  1 16:01 Downloads/\n774    -rwxrwxr--  2 ypy  ypy     4096 Feb  8 19:59 exercise\n664    -rw-rw-r--  2 ypy  ypy     4096 Dec  1 16:02 file.sh\n       0123456789  ~~~ 左边的数字0到9是最`drwxr-xr--`的标号, 方便注释描述\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("ol",[a("li",[s._v("r=4, w=2, x=1, 这个数值是linux定义的; 7 = 4 + 2 + 1")]),s._v(" "),a("li",[s._v("r=4表示读权限, w=2表示写权限, x=1表示可执行权限")]),s._v(" "),a("li",[s._v("标号0的位置, d 代表的是目录文件, - 代表普通文件")]),s._v(" "),a("li",[s._v("标号123的位置表示用户,用u表示; 标号456的位置表示用户组, 用g表示; 标号789的位置表示其他用户, 用o表示;")]),s._v(" "),a("li",[s._v("修改文件访问权限的方法--mode法")])]),s._v(" "),a("div",{staticClass:"language-text line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("权限     \t    数值\nrwx rw- r–\t    764\nrw- r–  r–\t    644\nrw- rw- r–\t    664\n\nu 代表用户.\ng 代表用户组.\no 代表其他.\na 代表所有\n\nchmod u+x file 只授予这个文件的所属者执行的权限 \nchmod ugo+r file 所有人皆可读取\n\n修改文件访问权限的方法--数字法\nchmod 600 file 只授予这个文件的所属者读写权限 \nchmod -R 600 file 授予这个文件夹及其里面的所有文件的所属者读写权限\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("h2",{attrs:{id:"nginx配置反向代理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx配置反向代理"}},[s._v("#")]),s._v(" nginx配置反向代理")]),s._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("p",[s._v("Nginx作为近年来较火的反向代理服务器，安装在目的主机端，主要用于转发客户机请求，后台有多个http服务器提供服务，nginx的功能就是把请求转发给后面的服务器，决定哪台目标主机来处理当前请求。")])]),s._v(" "),a("blockquote",[a("p",[s._v("需求:"),a("br"),s._v("\nvue项目和后端项目之间跨域问题"),a("br"),s._v("\nAPI请求地址为:  http://127.0.0.1:8000/upload/image"),a("br"),s._v("\n前端访问地址为: http://127.0.0.1:8001/api/upload/image"),a("br"),s._v("\n目前前端访问多了一个"),a("code",[s._v("api")]),s._v(", 且端口号不一样; 我们要利用"),a("code",[s._v("rewrite")]),s._v("指令对地址进行重写, 移除"),a("code",[s._v("api")])])]),s._v(" "),a("ul",[a("li",[s._v("代理配置")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("location /api/upload "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    proxy_pass http://127.0.0.1:8000"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    proxy_connect_timeout "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("600")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    proxy_read_timeout "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("600")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    rewrite "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^/api/(.*)$"')]),s._v(" /"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("break")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("ul",[a("li",[s._v("配置说明\n"),a("ul",[a("li",[a("code",[s._v("proxy_pass")]),s._v(" 反向代理, 这次我们代理到"),a("code",[s._v("http://127.0.0.1:8000")]),s._v("这个地址")]),s._v(" "),a("li",[a("code",[s._v("<font color='red'>")]),s._v('rewrite "^/api/(.*)$ /$1 break;'),a("code",[s._v("</font>")]),s._v(" 路径重写")]),s._v(" "),a("li",[a("code",[s._v("rewrite")]),s._v("语法: "),a("code",[s._v("rewrite")]),s._v("(关键字) + "),a("code",[s._v("<regex>")]),s._v("(正则) + "),a("code",[s._v("<replacement>")]),s._v("(替代内容) + "),a("code",[s._v("[flag]")]),s._v(";(flag标记)")]),s._v(" "),a("li",[a("code",[s._v("proxy_connect_timeout")]),s._v("后端服务器连接的超时时间_发起握手等候响应超时时间")]),s._v(" "),a("li",[a("code",[s._v("proxy_read_timeout")]),s._v(" 该指令设置与代理服务器的读超时时间")]),s._v(" "),a("li",[a("code",[s._v('rewrite "^/api/(.*)$" /$1 break;')]),a("br"),s._v("配置说明:\n"),a("ul",[a("li",[a("code",[s._v("rewrite")]),s._v("为固定关键字，表示开始进行rewrite匹配规则")]),s._v(" "),a("li",[a("code",[s._v("^/api/(.*)$")]),s._v(" 这是一个正则表达式，匹配含有"),a("code",[s._v("/api/")]),s._v("的域名和后面的路径地址")]),s._v(" "),a("li",[a("code",[s._v("/$1")]),s._v(" 是取自 "),a("code",[s._v("^/api/(.*)$")]),s._v("部分()里的内容, 匹配成功后跳转到的URL")]),s._v(" "),a("li",[a("code",[s._v("break")]),s._v(" 本条规则匹配完成即终止，不再匹配后面的任何规则")])])])])])]),s._v(" "),a("h2",{attrs:{id:"vue打包部署后刷新404问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue打包部署后刷新404问题"}},[s._v("#")]),s._v(" Vue打包部署后刷新404问题")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("p",[s._v("处理Vue部署history模式刷新404问题")])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("原因分析"),a("br"),s._v("\n浏览器地址栏  "),a("code",[s._v("http://localhost:8080/#/home/news")]),s._v("  带#号路径为hash模式, 不带#号的为history模式")]),s._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),a("p",[s._v("hash工作模式中,  url路径"),a("code",[s._v("#")]),s._v("及其之后的路径字符串,这里就是"),a("code",[s._v("#/home/news")]),s._v("是hash值,  "),a("font",{staticStyle:{color:"red"}},[a("strong",[s._v("hash值")])]),s._v("在http请求中, 不会带给服务器,  所以部署上线不会出现404问题; 然后history工作模式中, 所有路径在http中都会带给服务器, 服务器区分不开前端路由和后端路由, 服务器识别不了前端路由的时候, 刷新就会报404问题;")],1)])]),s._v(" "),a("li",[a("p",[s._v("解决思路")])])]),s._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),a("p",[s._v("解决问题的核心就是通过配置文件"),a("font",{staticStyle:{color:"red"}},[a("strong",[s._v("区分开前端路由和后端路由")])]),s._v("; 找不到后端路由, 通过重定向, 访问"),a("code",[s._v("index.html")])],1)]),s._v(" "),a("ul",[a("li",[s._v("nginx解决方案")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("location / "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    root   /root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" // 项目根目录\n    try_files "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),s._v("/ @router"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nlocation @router "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  rewrite ^.*$ /index.html last"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 匹配所有  /index.html last;")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("ul",[a("li",[a("p",[s._v("配置分析\n示例说明: "),a("code",[s._v("/root 项目根目录")]),a("br")]),s._v(" "),a("ul",[a("li",[s._v("理解: "),a("code",[s._v("try_files $uri $uri/ @aab")])])]),s._v(" "),a("blockquote",[a("p",[s._v("@ 表示配置文件中预定义标记点")])]),s._v(" "),a("ul",[a("li",[a("code",[s._v("try_files")]),s._v(" 尝试读取文件, 它尝试读取的事静态文件")]),s._v(" "),a("li",[s._v("第一个参数"),a("code",[s._v("$url")]),s._v(" , 它是nginx的一个变量, 存放着用户访问的地址"),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("比如: \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(". http://www.xxx.com/index.html,  那么"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),s._v("就是 /index\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(". http://localhost:8080/home/news, 那么"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),s._v("就是 /home/news\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(". http://localhost/example, 那么"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),s._v("就是 /example\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])]),s._v(" "),a("li",[s._v("第二个参数"),a("code",[s._v("$uri/")]),s._v(" 代表访问的是一个目录"),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("比如：\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(". http://www.xxx.com/hello/test/ ，那么"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),s._v("/就是 /hello/test/\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(". http://localhost/example, 那么"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$url")]),s._v("就是 /example/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])]),s._v(" "),a("li",[s._v("配置理解"),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[s._v("WARNING")])])])]),s._v(" "),a("p",[s._v("当用户尝试请求 "),a("code",[s._v("http://localhost/example")]),s._v("时"),a("br"),a("br"),s._v(" "),a("code",[s._v("try_files")]),s._v(" 尝试去网站根目录 ( "),a("code",[s._v("/root")]),s._v(" ) 读取用户这个文件,  如果存在名为 "),a("code",[s._v("/root/example")]),s._v(" (这个就是$uri文件, 第一个变量) 的文件, 就直接把这个文件的内容返回给用户;   如果不存在, 继续读取第二个变量"),a("code",[s._v("$uri/")]),s._v(", 增加了一个"),a("code",[s._v("/")]),s._v(", 也就是看 "),a("code",[s._v("/root/example")]),s._v("/ 这个目录是否存在, 如果存在, 这个目录直接返回给用户, 如果不存在, 直接跳转到第三个参数"),a("code",[s._v("@aab")]),s._v(", 这里就是通提供给预定义标记点, 跳转到下面的"),a("code",[s._v("@router")]),s._v(", 标记点"),a("code",[s._v("@router")]),s._v("和下面的"),a("code",[s._v("@router")]),s._v("保持一致")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("  location @router "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    rewrite ^.*$ /index.html last"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     匹配所有 /index.html last;")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# last标记 重写 url 后，会再从 server 走一遍匹配流程")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v(":::")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("rewrite ^.*$ /index.html last;")]),s._v(":   匹配所有  /index.html last;  所有的"),a("code",[s._v("$url")]),s._v("替换成真实的url(/index.html),后, (last)再从server走一遍匹配流程, 就走到了http://localhost/index.html; 访问到了文件")]),s._v(" "),a("li",[s._v("扩展: laravel伪静态"),a("br"),s._v("\n如果都找不到, 就会 fall back 到 try_files 的最后一个选项 /index.php，发起一个内部 “子请求”，也就是相当于 nginx 发起一个 HTTP 请求到 http://localhost/index.php"),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("  try_files "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),s._v("/ /index.php?"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$query_string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("   \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])])])]),s._v(" "),a("h2",{attrs:{id:"后台启动任务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#后台启动任务"}},[s._v("#")]),s._v(" 后台启动任务")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("背景"),a("br"),s._v("\n当我们在终端启动服务或者训练模型时，启动命令往往会阻塞自己，即无法在终端继续输入，同时为了保证终端关闭不影响进程中断，需要在后台启动进程 ;")])]),s._v(" "),a("li",[a("p",[s._v("命令")]),s._v(" "),a("ul",[a("li",[s._v("后台启动常用的命令:  "),a("code",[s._v("nohup command 2>&1 & 或者 nohup command 2>>&1 &")])]),s._v(" "),a("li",[s._v("示例： "),a("code",[s._v("nohup python my.py >>/home/xxx/my.log 2>&1 &")])]),s._v(" "),a("li",[s._v("在bash shell中：\n"),a("ul",[a("li",[a("code",[s._v("0")]),s._v("：代表标准输入，即键盘输入的")]),s._v(" "),a("li",[a("code",[s._v("1")]),s._v("：代表标准输出，即输出到显示屏的内容")]),s._v(" "),a("li",[a("code",[s._v("2")]),s._v("：代表标准错误，即报错内容")]),s._v(" "),a("li",[a("code",[s._v(">>")]),s._v(": 代表追加, "),a("code",[s._v(">")]),s._v("会让日志文件的内容清空")]),s._v(" "),a("li",[a("code",[s._v("nohup")]),s._v(": 表示不挂断地执行命令，即便退出当前终端。同时会将屏幕的标准输出追加到默认文件"),a("code",[s._v("nohup.out")]),s._v("文件")]),s._v(" "),a("li",[a("code",[s._v("&")]),s._v("：表示在后台执行命令")]),s._v(" "),a("li",[a("code",[s._v("2>&1")]),s._v(": 不能用空格，代表将错误内容重定向到标准输出中。")])])])])]),s._v(" "),a("li",[a("p",[s._v("命令解析"),a("br")]),s._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),a("p",[a("font",{staticStyle:{color:"red"}},[a("strong",[s._v("假如有如下命令")])]),s._v(":"),a("br"),s._v(" "),a("code",[s._v("nohup /usr/bin/php /www/wwwroot/school/artisan swoole >> /home/my.log 2>&1 &")])],1)])]),s._v(" "),a("li",[a("p",[a("code",[s._v("nohup /usr/bin/php /www/wwwroot/school/artisan swoole")]),s._v(" 表示php不间断低执行swoole脚本")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("/www/wwwroot/school/artisan swoole >> /home/my.log")]),s._v("这部分等同于 "),a("code",[s._v("/www/wwwroot/school/artisan swoole 1>> /home/my.log")]),s._v("，即省略了标准输出1;")])]),s._v(" "),a("li",[a("p",[s._v("上面命令可以拆解为:")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" /usr/bin/php /www/wwwroot/school/artisan swoole "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v(">>")]),s._v(" /home/my.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" /usr/bin/php /www/wwwroot/school/artisan swoole "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">>")]),s._v(" /home/my.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("&1")]),s._v("中的 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v(" 是为了区分 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" 是文件名 还是标准输出1 ，如果省略掉则变成了输出到文件1中\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v(":::")])]),s._v(" "),a("li",[a("p",[s._v("nohup不输出到文件")]),s._v(" "),a("ul",[a("li",[s._v("nohup启动服务时，会默认生成 nohup.out 文件，这样可能会占据相当一部分的磁盘空间，所以便会有一种需求 - 不让nohup 产生日志。")]),s._v(" "),a("li",[s._v("其实是没办法不让 nohup 产生日志的，但是可以利用 linux 的 黑洞 /dev/null ，重定向到它的信息会消失，如果我们不需要保存程序运行时的所有信息时，就可以将信息重定向到 /dev/null 。")]),s._v(" "),a("li",[a("font",{staticStyle:{color:"red"}},[a("strong",[s._v("示例如下")])]),s._v(":"),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" /usr/bin/php /www/wwwroot/school/artisan swoole "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /dev/null "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("&1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])],1)])])]),s._v(" "),a("h2",{attrs:{id:"反向代理之后获取真实ip-php版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#反向代理之后获取真实ip-php版本"}},[s._v("#")]),s._v(" 反向代理之后获取真实ip(php版本)")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("p",[s._v("使用VUE前后端分离开发, 后端使用Laravel框架, 想要获取到用户的真实IP地址;")]),s._v(" "),a("p",[s._v("因为分离开发不同源跨域问题 所以只能进行前端Nginx反向代理; 反向代理之后, 发现返回的只是代理服务器的IP地址。")])]),s._v(" "),a("p",[a("font",{attrs:{color:"blue"}},[a("strong",[s._v("在前端Nginx代理配置写入")])])],1),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在前端Nginx代理配置写入")]),s._v("\nlocation /web "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    proxy_pass http://127.0.0.1:9099"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    proxy_connect_timeout "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("600")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    proxy_read_timeout "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("600")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    rewrite "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^/web/(.*)$"')]),s._v(" /"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("break")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 新增配置下面两行")]),s._v("\nproxy_set_header X-Forwarded-For "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$remote_addr")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nproxy_set_header X-Forwarded-For "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$proxy_add_x_forwarded_for")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[a("font",{attrs:{color:"blue"}},[a("strong",[s._v("插入之后进行Nginx重启发现warning错误")])])],1),s._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[s._v("DANGER")]),s._v(" "),a("p",[s._v("Starting nginx: nginx: [warn] could not build optimal proxy_headers_hash, you should increase either proxy_headers_hash_max_size: 512 or proxy_headers_hash_bucket_size: 64;")]),s._v(" "),a("p",[s._v("ignoring proxy_headers_hash_bucket_size")])]),s._v(" "),a("p",[a("font",{attrs:{color:"blue"}},[a("strong",[s._v("在nginx.conf配置文件里面的http代码块里面加入下面配置代码解决")])])],1),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 新加入配置代码")]),s._v("\nproxy_headers_hash_max_size "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("51200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nproxy_headers_hash_bucket_size "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6400")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[a("font",{attrs:{color:"blue"}},[a("strong",[s._v("真实的ip地址就是:  "),a("code",[s._v("$_SERVER['HTTP_X_FORWARDED_FOR']")])])]),s._v(" 。")],1),s._v(" "),a("h2",{attrs:{id:"常用linux命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用linux命令"}},[s._v("#")]),s._v(" 常用linux命令")]),s._v(" "),a("h3",{attrs:{id:"ls命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ls命令"}},[s._v("#")]),s._v(" ls命令")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("p",[s._v("用于显示指定工作目录下之内容（列出目前工作目录所含之文件及子目录)。")])]),s._v(" "),a("p",[a("font",{attrs:{color:"blue"}},[a("strong",[s._v("语法: ")])])],1),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-alrtAFR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("-a 显示所有文件及目录 (. 开头的隐藏文件也会列出)")]),s._v(" "),a("li",[s._v("-l 除文件名称外，亦将文件型态、权限、拥有者、文件大小等资讯详细列出")]),s._v(" "),a("li",[s._v("-r 将文件以相反次序显示(原定依英文字母次序)")]),s._v(" "),a("li",[s._v("-t 将文件依建立时间之先后次序列出")]),s._v(" "),a("li",[s._v('-A 同 -a ，但不列出 "." (目前目录) 及 ".." (父目录)')]),s._v(" "),a("li",[s._v('-F 在列出的文件名称后加一符号；例如可执行档则加 "*", 目录则加 "/"')]),s._v(" "),a("li",[s._v("-R 若目录下有文件，则以下之文件亦皆依序列出")])]),s._v(" "),a("p",[a("font",{attrs:{color:"blue"}},[a("strong",[s._v("按照时间升序显示文件信息:")])])],1),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-lrt")]),s._v(" --full-time\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("font",{attrs:{color:"blue"}},[a("strong",[s._v("按照时间降序显示文件信息(最新修改的排在前面):")])])],1),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-lt")]),s._v(" --full-time\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"top命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#top命令"}},[s._v("#")]),s._v(" top命令")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("root@iZjalzfbm2offnZ:/wwwroot"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# top")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("top")]),s._v(" - "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":33:18 up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("184")]),s._v(" days, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":19,  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" user,  load average: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.11")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.09")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.23")]),s._v("\nTasks: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("506")]),s._v(" total,   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" running, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("505")]),s._v(" sleeping,   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" stopped,   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" zombie\n%Cpu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v(" us,  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v(" sy,  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(" ni, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("98.0")]),s._v(" id,  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(" wa,  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(" hi,  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(" si,  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(" st\nMiB Mem "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3936.1")]),s._v(" total,    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("400.0")]),s._v(" free,   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1066.8")]),s._v(" used,   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2469.4")]),s._v(" buff/cache\nMiB Swap:   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096.0")]),s._v(" total,    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("658.5")]),s._v(" free,   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3437.5")]),s._v(" used.   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2590.7")]),s._v(" avail Mem \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[a("font",{attrs:{color:"red"}},[a("strong",[s._v("第一行:")])]),s._v("\n当前时间，系统运行时间，登录用户数量，平均负载（分别在5，10，15分钟内)")],1),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("top")]),s._v(" - "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":33:18 up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("184")]),s._v(" days, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":19,  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" user,  load average: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.11")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.09")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.23")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("当前时间是10:33:18")]),s._v(" "),a("li",[s._v("系统运行了184天,17小时19分")]),s._v(" "),a("li",[s._v("当前登录用户的数量: 1个用户")]),s._v(" "),a("li",[s._v("相应最近5、10和15分钟内的平均负载为 0.11, 0.09, 0.23")])]),s._v(" "),a("p",[a("font",{attrs:{color:"red"}},[a("strong",[s._v("第二行:")])]),s._v("\n显示了系统的进程总数，后面是相应的状态下的进程")],1),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("Tasks: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("506")]),s._v(" total,   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" running, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("505")]),s._v(" sleeping,   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" stopped,   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" zombie\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("一共506个进程")]),s._v(" "),a("li",[s._v("1个是running状态进程")]),s._v(" "),a("li",[s._v("505个sleeping状态进程")]),s._v(" "),a("li",[s._v("0个stopped状态进程")]),s._v(" "),a("li",[s._v("0个zombie状态进程, 也叫僵尸进程, 就是，这个进程其实已经结束了，它仅仅在进程列表中保留一个位置，记载该进程的状态信息等，僵尸进程不再占有内存空间，没有可执行程序，也不能被调用。这个进程中存储着进程的各种信息，占用cpu啊，运行时间之类的。这个进程会被其父进程收集它的信息。")])]),s._v(" "),a("p",[a("font",{attrs:{color:"red"}},[a("strong",[s._v("第三行:")])]),s._v("\n显示cpu的各种信息")],1),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("%Cpu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v(" us,  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v(" sy,  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(" ni, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("98.0")]),s._v(" id,  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(" wa,  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(" hi,  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(" si,  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(" st\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("us：用户空间占cpu百分比")]),s._v(" "),a("li",[s._v("sy：内核空间占cpu百分比")]),s._v(" "),a("li",[s._v("ni：用户进程空间内改变过优先级的进程占用cpu百分比")]),s._v(" "),a("li",[s._v("id：空闲cpu百分比")]),s._v(" "),a("li",[s._v("wa：等待输入输出的cpu时间百分比")]),s._v(" "),a("li",[s._v("hi：硬中断（处理硬件中断的cpu时间）")]),s._v(" "),a("li",[s._v("si：软中断（处理软件中断的cpu时间）")])]),s._v(" "),a("p",[a("font",{attrs:{color:"red"}},[a("strong",[s._v("第四,五行:")])]),s._v("\n内存使用, 第四行是物理内存使用, 第五行是虚拟内存使用(交换空间)。")],1),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("MiB Mem "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3936.1")]),s._v(" total,    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("400.0")]),s._v(" free,   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1066.8")]),s._v(" used,   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2469.4")]),s._v(" buff/cache\nMiB Swap:   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096.0")]),s._v(" total,    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("658.5")]),s._v(" free,   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3437.5")]),s._v(" used.   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2590.7")]),s._v(" avail Mem \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("物理内存:  全部可用内存(total);   空闲内存(free);   已使用内存(used);   缓存内存(buff/cache)"),a("br"),s._v("\n虚拟内存:  全部可用内存(total);   空闲内存(free);   已使用内存(used);   缓冲交换空间(avail Mem)")]),s._v(" "),a("p",[a("font",{attrs:{color:"red"}},[a("strong",[s._v("字段/列")])])],1),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v(" PID   "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v("     PR    NI    VIRT    RES    SHR     S   %CPU   %MEM      TIME+           COMMAND                                                                                                                                                                 \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1131801")]),s._v(" root    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-10")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("157164")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("59152")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10332")]),s._v("   S   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.3")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.5")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("908")]),s._v(":26.95          AliYunDun                                                                                                                                                               \n "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("743108")]),s._v(" root    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1278484")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("46284")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8984")]),s._v("    S   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.7")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("991")]),s._v(":45.21          python3                                                                                                                                                                 \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2712198")]),s._v(" root    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("658016")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("58448")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9996")]),s._v("    S   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.7")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.5")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("554")]),s._v(":13.99          python3 \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("ul",[a("li",[s._v("PID   进程ID，进程的唯一标识符")]),s._v(" "),a("li",[s._v("USER  进程所有者的实际用户名")]),s._v(" "),a("li",[s._v("PR    进程的调度优先级。这个字段的一些值是’rt’。这意味这这些进程运行在实时态。")]),s._v(" "),a("li",[s._v("NI    进程的nice值（优先级）。越小的值意味着越高的优先级。")]),s._v(" "),a("li",[s._v("VIRT  进程使用的虚拟内存。")]),s._v(" "),a("li",[s._v("RES   驻留内存大小。驻留内存是任务使用的非交换物理内存大小。")]),s._v(" "),a("li",[s._v("SHR   SHR是进程使用的共享内存。")]),s._v(" "),a("li",[s._v("S     这个是进程的状态。它有以下不同的值:\n"),a("ul",[a("li",[s._v("D – 不可中断的睡眠态。")]),s._v(" "),a("li",[s._v("R – 运行态")]),s._v(" "),a("li",[s._v("S – 睡眠态")]),s._v(" "),a("li",[s._v("T – 被跟踪或已停止")]),s._v(" "),a("li",[s._v("Z – 僵尸态")])])]),s._v(" "),a("li",[s._v("%CPU 自从上一次更新时到现在任务所使用的CPU时间百分比。")]),s._v(" "),a("li",[s._v("%MEM  进程使用的可用物理内存百分比。")]),s._v(" "),a("li",[s._v("TIME+ 任务启动后到现在所使用的全部CPU时间，精确到百分之一秒。")]),s._v(" "),a("li",[s._v("COMMAND 运行进程所使用的命令。")])]),s._v(" "),a("h2",{attrs:{id:"nginx代理之后-访问不到静态资源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx代理之后-访问不到静态资源"}},[s._v("#")]),s._v(" nginx代理之后, 访问不到静态资源")]),s._v(" "),a("p",[s._v("nginx配置修改：配置静态文件的映射")]),s._v(" "),a("div",{staticClass:"language-conf line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("location ~ .*\\.(gif|jpg|jpeg|png|bmp|swf)$\n{\n    # 图片代理地址\n    proxy_pass http://localhost:1111;  \n}\nlocation ~ .*\\.(js|css)?$\n{\n    # js/css\n\tproxy_pass http://www.xxx.com:8978;\n}\n\t\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);