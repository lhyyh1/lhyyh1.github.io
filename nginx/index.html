<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>nginx | 失效的氟西丁</title>
    <meta name="generator" content="VuePress 1.9.8">
    <link rel="icon" href="/lhyblog/image/favicon.ico">
    <link rel="stylesheet" href="/lhyblog/css/style.css">
    <meta name="description" content="日拱一卒无有尽，功不唐捐终入海">
    
    <link rel="preload" href="/lhyblog/assets/css/0.styles.68704805.css" as="style"><link rel="preload" href="/lhyblog/assets/js/app.5d93db53.js" as="script"><link rel="preload" href="/lhyblog/assets/js/2.8d81c5f1.js" as="script"><link rel="preload" href="/lhyblog/assets/js/23.347d7883.js" as="script"><link rel="preload" href="/lhyblog/assets/js/3.4aea83a5.js" as="script"><link rel="prefetch" href="/lhyblog/assets/js/10.5a62e4bb.js"><link rel="prefetch" href="/lhyblog/assets/js/11.d21d05c8.js"><link rel="prefetch" href="/lhyblog/assets/js/12.9892c7c3.js"><link rel="prefetch" href="/lhyblog/assets/js/13.3f7be324.js"><link rel="prefetch" href="/lhyblog/assets/js/14.bf80a139.js"><link rel="prefetch" href="/lhyblog/assets/js/15.9af29553.js"><link rel="prefetch" href="/lhyblog/assets/js/16.957e5c08.js"><link rel="prefetch" href="/lhyblog/assets/js/17.d9ea814b.js"><link rel="prefetch" href="/lhyblog/assets/js/18.fe60a8a6.js"><link rel="prefetch" href="/lhyblog/assets/js/19.e8b06bfe.js"><link rel="prefetch" href="/lhyblog/assets/js/20.87eff516.js"><link rel="prefetch" href="/lhyblog/assets/js/21.8658752e.js"><link rel="prefetch" href="/lhyblog/assets/js/22.30a3bde4.js"><link rel="prefetch" href="/lhyblog/assets/js/24.f6b7f30e.js"><link rel="prefetch" href="/lhyblog/assets/js/25.697e1d58.js"><link rel="prefetch" href="/lhyblog/assets/js/26.e99e4e5b.js"><link rel="prefetch" href="/lhyblog/assets/js/27.ecc78804.js"><link rel="prefetch" href="/lhyblog/assets/js/28.c084aee1.js"><link rel="prefetch" href="/lhyblog/assets/js/29.18f2e46b.js"><link rel="prefetch" href="/lhyblog/assets/js/30.a8b1171b.js"><link rel="prefetch" href="/lhyblog/assets/js/31.36b6b75b.js"><link rel="prefetch" href="/lhyblog/assets/js/32.ba9a9510.js"><link rel="prefetch" href="/lhyblog/assets/js/33.e25e1bf9.js"><link rel="prefetch" href="/lhyblog/assets/js/34.f90e5e6f.js"><link rel="prefetch" href="/lhyblog/assets/js/35.5229d417.js"><link rel="prefetch" href="/lhyblog/assets/js/36.e98c59e6.js"><link rel="prefetch" href="/lhyblog/assets/js/37.d6baccb3.js"><link rel="prefetch" href="/lhyblog/assets/js/38.d8129f3a.js"><link rel="prefetch" href="/lhyblog/assets/js/39.7c1e8322.js"><link rel="prefetch" href="/lhyblog/assets/js/4.6d213030.js"><link rel="prefetch" href="/lhyblog/assets/js/5.806ca713.js"><link rel="prefetch" href="/lhyblog/assets/js/6.753e5d29.js"><link rel="prefetch" href="/lhyblog/assets/js/7.4ec49768.js"><link rel="prefetch" href="/lhyblog/assets/js/8.f32da868.js"><link rel="prefetch" href="/lhyblog/assets/js/9.3f41e8d6.js">
    <link rel="stylesheet" href="/lhyblog/assets/css/0.styles.68704805.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/lhyblog/" class="home-link router-link-active"><!----> <span class="site-name">失效的氟西丁</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="php" class="dropdown-title"><span class="title">php</span> <span class="arrow down"></span></button> <button type="button" aria-label="php" class="mobile-dropdown-title"><span class="title">php</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lhyblog/php/base/" class="nav-link">
  通用篇
</a></li><li class="dropdown-item"><!----> <a href="/lhyblog/php/laravel/" class="nav-link">
  Laravel
</a></li><li class="dropdown-item"><!----> <a href="/lhyblog/php/skill/" class="nav-link">
  技巧篇
</a></li></ul></div></div><div class="nav-item"><a href="/lhyblog/nginx/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  nginx
</a></div><div class="nav-item"><a href="/lhyblog/print/" class="nav-link">
  print
</a></div><div class="nav-item"><a href="/lhyblog/mysql/" class="nav-link">
  mysql
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="web" class="dropdown-title"><span class="title">web</span> <span class="arrow down"></span></button> <button type="button" aria-label="web" class="mobile-dropdown-title"><span class="title">web</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lhyblog/web/layout/" class="nav-link">
  css布局
</a></li><li class="dropdown-item"><!----> <a href="/lhyblog/web/case/" class="nav-link">
  css实例
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="js" class="dropdown-title"><span class="title">js</span> <span class="arrow down"></span></button> <button type="button" aria-label="js" class="mobile-dropdown-title"><span class="title">js</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lhyblog/js/JavaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/lhyblog/js/decode/" class="nav-link">
  js令牌解码
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="python" class="dropdown-title"><span class="title">python</span> <span class="arrow down"></span></button> <button type="button" aria-label="python" class="mobile-dropdown-title"><span class="title">python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lhyblog/python/base/" class="nav-link">
  python基础
</a></li><li class="dropdown-item"><!----> <a href="/lhyblog/python/machine/" class="nav-link">
  机器学习
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Golang" class="dropdown-title"><span class="title">Golang</span> <span class="arrow down"></span></button> <button type="button" aria-label="Golang" class="mobile-dropdown-title"><span class="title">Golang</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lhyblog/go/env/" class="nav-link">
  前言和环境
</a></li><li class="dropdown-item"><!----> <a href="/lhyblog/go/grammar/" class="nav-link">
  语法基础
</a></li><li class="dropdown-item"><!----> <a href="/lhyblog/go/base/" class="nav-link">
  函数和数组(切片)
</a></li><li class="dropdown-item"><!----> <a href="/lhyblog/go/map/" class="nav-link">
  Map,指针,值传递,引用传递
</a></li><li class="dropdown-item"><!----> <a href="/lhyblog/go/struct/" class="nav-link">
  结构体
</a></li><li class="dropdown-item"><!----> <a href="/lhyblog/go/gin/" class="nav-link">
  Gin
</a></li><li class="dropdown-item"><!----> <a href="/lhyblog/go/concurrent/" class="nav-link">
  go并发
</a></li><li class="dropdown-item"><!----> <a href="/lhyblog/go/standard/" class="nav-link">
  常用标准库
</a></li><li class="dropdown-item"><!----> <a href="/lhyblog/go/skills/" class="nav-link">
  技巧篇
</a></li></ul></div></div><div class="nav-item"><a href="/lhyblog/docker/" class="nav-link">
  docker
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="vue" class="dropdown-title"><span class="title">vue</span> <span class="arrow down"></span></button> <button type="button" aria-label="vue" class="mobile-dropdown-title"><span class="title">vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lhyblog/vue/base/" class="nav-link">
  vue基础
</a></li><li class="dropdown-item"><!----> <a href="/lhyblog/vue/instruction/" class="nav-link">
  vue指令
</a></li><li class="dropdown-item"><!----> <a href="/lhyblog/vue/assembly/" class="nav-link">
  组件化编程
</a></li><li class="dropdown-item"><!----> <a href="/lhyblog/vue/problem/" class="nav-link">
  problem
</a></li><li class="dropdown-item"><!----> <a href="/lhyblog/vue/uniApp/" class="nav-link">
  uniApp
</a></li><li class="dropdown-item"><!----> <a href="/lhyblog/vue/utils/" class="nav-link">
  问题笔记
</a></li><li class="dropdown-item"><!----> <a href="/lhyblog/vue/regular/" class="nav-link">
  正则
</a></li></ul></div></div><div class="nav-item"><a href="/lhyblog/tool/" class="nav-link">
  tool
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="php" class="dropdown-title"><span class="title">php</span> <span class="arrow down"></span></button> <button type="button" aria-label="php" class="mobile-dropdown-title"><span class="title">php</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lhyblog/php/base/" class="nav-link">
  通用篇
</a></li><li class="dropdown-item"><!----> <a href="/lhyblog/php/laravel/" class="nav-link">
  Laravel
</a></li><li class="dropdown-item"><!----> <a href="/lhyblog/php/skill/" class="nav-link">
  技巧篇
</a></li></ul></div></div><div class="nav-item"><a href="/lhyblog/nginx/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  nginx
</a></div><div class="nav-item"><a href="/lhyblog/print/" class="nav-link">
  print
</a></div><div class="nav-item"><a href="/lhyblog/mysql/" class="nav-link">
  mysql
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="web" class="dropdown-title"><span class="title">web</span> <span class="arrow down"></span></button> <button type="button" aria-label="web" class="mobile-dropdown-title"><span class="title">web</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lhyblog/web/layout/" class="nav-link">
  css布局
</a></li><li class="dropdown-item"><!----> <a href="/lhyblog/web/case/" class="nav-link">
  css实例
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="js" class="dropdown-title"><span class="title">js</span> <span class="arrow down"></span></button> <button type="button" aria-label="js" class="mobile-dropdown-title"><span class="title">js</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lhyblog/js/JavaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/lhyblog/js/decode/" class="nav-link">
  js令牌解码
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="python" class="dropdown-title"><span class="title">python</span> <span class="arrow down"></span></button> <button type="button" aria-label="python" class="mobile-dropdown-title"><span class="title">python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lhyblog/python/base/" class="nav-link">
  python基础
</a></li><li class="dropdown-item"><!----> <a href="/lhyblog/python/machine/" class="nav-link">
  机器学习
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Golang" class="dropdown-title"><span class="title">Golang</span> <span class="arrow down"></span></button> <button type="button" aria-label="Golang" class="mobile-dropdown-title"><span class="title">Golang</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lhyblog/go/env/" class="nav-link">
  前言和环境
</a></li><li class="dropdown-item"><!----> <a href="/lhyblog/go/grammar/" class="nav-link">
  语法基础
</a></li><li class="dropdown-item"><!----> <a href="/lhyblog/go/base/" class="nav-link">
  函数和数组(切片)
</a></li><li class="dropdown-item"><!----> <a href="/lhyblog/go/map/" class="nav-link">
  Map,指针,值传递,引用传递
</a></li><li class="dropdown-item"><!----> <a href="/lhyblog/go/struct/" class="nav-link">
  结构体
</a></li><li class="dropdown-item"><!----> <a href="/lhyblog/go/gin/" class="nav-link">
  Gin
</a></li><li class="dropdown-item"><!----> <a href="/lhyblog/go/concurrent/" class="nav-link">
  go并发
</a></li><li class="dropdown-item"><!----> <a href="/lhyblog/go/standard/" class="nav-link">
  常用标准库
</a></li><li class="dropdown-item"><!----> <a href="/lhyblog/go/skills/" class="nav-link">
  技巧篇
</a></li></ul></div></div><div class="nav-item"><a href="/lhyblog/docker/" class="nav-link">
  docker
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="vue" class="dropdown-title"><span class="title">vue</span> <span class="arrow down"></span></button> <button type="button" aria-label="vue" class="mobile-dropdown-title"><span class="title">vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lhyblog/vue/base/" class="nav-link">
  vue基础
</a></li><li class="dropdown-item"><!----> <a href="/lhyblog/vue/instruction/" class="nav-link">
  vue指令
</a></li><li class="dropdown-item"><!----> <a href="/lhyblog/vue/assembly/" class="nav-link">
  组件化编程
</a></li><li class="dropdown-item"><!----> <a href="/lhyblog/vue/problem/" class="nav-link">
  problem
</a></li><li class="dropdown-item"><!----> <a href="/lhyblog/vue/uniApp/" class="nav-link">
  uniApp
</a></li><li class="dropdown-item"><!----> <a href="/lhyblog/vue/utils/" class="nav-link">
  问题笔记
</a></li><li class="dropdown-item"><!----> <a href="/lhyblog/vue/regular/" class="nav-link">
  正则
</a></li></ul></div></div><div class="nav-item"><a href="/lhyblog/tool/" class="nav-link">
  tool
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span></span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/lhyblog/nginx/" aria-current="page" class="active sidebar-link">nginx</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lhyblog/nginx/#命令连接符" class="sidebar-link">命令连接符</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lhyblog/nginx/#" class="sidebar-link">&amp;&amp;</a></li><li class="sidebar-sub-header"><a href="/lhyblog/nginx/#-2" class="sidebar-link">;</a></li><li class="sidebar-sub-header"><a href="/lhyblog/nginx/#-3" class="sidebar-link">||</a></li></ul></li><li class="sidebar-sub-header"><a href="/lhyblog/nginx/#shell脚本" class="sidebar-link">shell脚本</a></li><li class="sidebar-sub-header"><a href="/lhyblog/nginx/#test-sh和source-test-sh区别" class="sidebar-link">./test.sh和source test.sh区别</a></li><li class="sidebar-sub-header"><a href="/lhyblog/nginx/#文件权限问题" class="sidebar-link">文件权限问题</a></li><li class="sidebar-sub-header"><a href="/lhyblog/nginx/#nginx配置反向代理" class="sidebar-link">nginx配置反向代理</a></li><li class="sidebar-sub-header"><a href="/lhyblog/nginx/#vue打包部署后刷新404问题" class="sidebar-link">Vue打包部署后刷新404问题</a></li><li class="sidebar-sub-header"><a href="/lhyblog/nginx/#后台启动任务" class="sidebar-link">后台启动任务</a></li><li class="sidebar-sub-header"><a href="/lhyblog/nginx/#反向代理之后获取真实ip-php版本" class="sidebar-link">反向代理之后获取真实ip(php版本)</a></li><li class="sidebar-sub-header"><a href="/lhyblog/nginx/#常用linux命令" class="sidebar-link">常用linux命令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lhyblog/nginx/#ls命令" class="sidebar-link">ls命令</a></li><li class="sidebar-sub-header"><a href="/lhyblog/nginx/#top命令" class="sidebar-link">top命令</a></li></ul></li><li class="sidebar-sub-header"><a href="/lhyblog/nginx/#nginx代理之后-访问不到静态资源" class="sidebar-link">nginx代理之后, 访问不到静态资源</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="nginx"><a href="#nginx" class="header-anchor">#</a> nginx</h1> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>整理一些常用的nginx技巧, 以便后面查阅, 好记性不如烂笔头!</p></div> <h2 id="命令连接符"><a href="#命令连接符" class="header-anchor">#</a> 命令连接符</h2> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>一般情况下, 我们常用<code>&amp;&amp;</code>, 用来保证每条命令都顺利执行</p></div> <h3 id=""><a href="#" class="header-anchor">#</a> <code>&amp;&amp;</code></h3> <p>语法格式:</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>command1 <span class="token operator">&amp;&amp;</span> command2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="custom-block warning"><p class="custom-block-title">注意</p> <p><code>&amp;&amp;</code>左边的command1执行成功(返回0表示成功)后，<code>&amp;&amp;</code>右边的command2才能被执行</p></div> <h3 id="-2"><a href="#-2" class="header-anchor">#</a> <code>;</code></h3> <p>每个命令之间用<code>;</code>隔开, 不会影响其它命令的执行, 换句话说, 各个命令都会执行, 但不保证每个命令都执行</p> <h3 id="-3"><a href="#-3" class="header-anchor">#</a> <code>||</code></h3> <p>每个命令之间用<code>||</code>隔开, <code>||</code>是或的意思, 只有前面的命名执行失败后才去执行下一条命名, 指到执行成功一条命令为止</p> <h2 id="shell脚本"><a href="#shell脚本" class="header-anchor">#</a> shell脚本</h2> <div class="custom-block tip"><p class="custom-block-title">注意</p> <ol><li>date和后面的<code>+</code>之间有空格</li> <li>示例是 Shell 脚本一次性执行多条语句，并可以统计时间</li></ol></div> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#! /bin/bash</span>
<span class="token assign-left variable">startTime</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">date</span> +%Y%m%d-%H:%M<span class="token variable">`</span></span> <span class="token comment"># 脚本执行的开始时间</span>
<span class="token assign-left variable">startTime_s</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">date</span> +%s<span class="token variable">`</span></span> <span class="token comment"># 秒</span>
<span class="token builtin class-name">cd</span> /wwwroot <span class="token operator">&amp;&amp;</span>  <span class="token comment"># 切换到/wwwroot目录</span>
<span class="token function">mkdir</span> <span class="token builtin class-name">test</span> <span class="token operator">&amp;&amp;</span> <span class="token comment"># 创建test目录</span>
<span class="token builtin class-name">cd</span> <span class="token builtin class-name">test</span> <span class="token operator">&amp;&amp;</span> <span class="token comment"># 切换到test目录</span>
<span class="token builtin class-name">pwd</span>  <span class="token comment"># 显示当前工作目录</span>
<span class="token assign-left variable">endTime</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">date</span> +%Y%m%d-%H:%M<span class="token variable">`</span></span>
<span class="token assign-left variable">endTime_s</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">date</span> +%s<span class="token variable">`</span></span>
<span class="token assign-left variable">sumTime</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">$endTime_s</span> - <span class="token variable">$startTime_s</span> <span class="token punctuation">]</span> <span class="token comment"># $[] ：用于整数运算</span>
<span class="token comment"># echo shell中输出变量</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$startTime</span> ----&gt;  <span class="token variable">$endTime</span>&quot;</span>  <span class="token string">&quot;Totl: <span class="token variable">$sumTime</span> seconds&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="test-sh和source-test-sh区别"><a href="#test-sh和source-test-sh区别" class="header-anchor">#</a> ./test.sh和source test.sh区别</h2> <div class="custom-block tip"><p class="custom-block-title">区别</p> <ol><li><p><code>./test.sh</code> 重新建立一个子shell，在子shell中执行脚本里面的语句，该子shell继承父shell的环境变量，但子shell新建的、改变的变量不会被带回父shell，除非使用</p></li> <li><p>source test.sh 这个命令其实只是简单地读取脚本里面的语句依次在当前shell里面执行，没有建立新的子shell。那么脚本里面所有新建、改变变量的语句都会保存在当前shell里</p></li></ol></div> <h2 id="文件权限问题"><a href="#文件权限问题" class="header-anchor">#</a> 文件权限问题</h2> <div class="language-text line-numbers-mode"><pre class="language-text"><code> ypy@ubuntu:~$ ls -l
754    drwxr-xr--  2 ypy  ypy     4096 Nov 30 18:33 Desktop/
754    drwxr-xr--  2 ypy  ypy     4096 Nov 30 18:33 Documents/
754    drwxr-xr--  2 ypy  ypy     4096 Dec  1 16:01 Downloads/
774    -rwxrwxr--  2 ypy  ypy     4096 Feb  8 19:59 exercise
664    -rw-rw-r--  2 ypy  ypy     4096 Dec  1 16:02 file.sh
       0123456789  ~~~ 左边的数字0到9是最`drwxr-xr--`的标号, 方便注释描述
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol><li>r=4, w=2, x=1, 这个数值是linux定义的; 7 = 4 + 2 + 1</li> <li>r=4表示读权限, w=2表示写权限, x=1表示可执行权限</li> <li>标号0的位置, d 代表的是目录文件, - 代表普通文件</li> <li>标号123的位置表示用户,用u表示; 标号456的位置表示用户组, 用g表示; 标号789的位置表示其他用户, 用o表示;</li> <li>修改文件访问权限的方法--mode法</li></ol> <div class="language-text line-numbers-mode"><pre class="language-text"><code>权限     	    数值
rwx rw- r–	    764
rw- r–  r–	    644
rw- rw- r–	    664

u 代表用户.
g 代表用户组.
o 代表其他.
a 代表所有

chmod u+x file 只授予这个文件的所属者执行的权限 
chmod ugo+r file 所有人皆可读取

修改文件访问权限的方法--数字法
chmod 600 file 只授予这个文件的所属者读写权限 
chmod -R 600 file 授予这个文件夹及其里面的所有文件的所属者读写权限
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="nginx配置反向代理"><a href="#nginx配置反向代理" class="header-anchor">#</a> nginx配置反向代理</h2> <div class="custom-block warning"><p class="custom-block-title">提示</p> <p>Nginx作为近年来较火的反向代理服务器，安装在目的主机端，主要用于转发客户机请求，后台有多个http服务器提供服务，nginx的功能就是把请求转发给后面的服务器，决定哪台目标主机来处理当前请求。</p></div> <blockquote><p>需求:<br>
vue项目和后端项目之间跨域问题<br>
API请求地址为:  http://127.0.0.1:8000/upload/image<br>
前端访问地址为: http://127.0.0.1:8001/api/upload/image<br>
目前前端访问多了一个<code>api</code>, 且端口号不一样; 我们要利用<code>rewrite</code>指令对地址进行重写, 移除<code>api</code></p></blockquote> <ul><li>代理配置</li></ul> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>location /api/upload <span class="token punctuation">{</span>
    proxy_pass http://127.0.0.1:8000<span class="token punctuation">;</span>
    proxy_connect_timeout <span class="token number">600</span><span class="token punctuation">;</span>
    proxy_read_timeout <span class="token number">600</span><span class="token punctuation">;</span>
    rewrite <span class="token string">&quot;^/api/(.*)$&quot;</span> /<span class="token variable">$1</span> <span class="token builtin class-name">break</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>配置说明
<ul><li><code>proxy_pass</code> 反向代理, 这次我们代理到<code>http://127.0.0.1:8000</code>这个地址</li> <li><code>&lt;font color='red'&gt;</code>rewrite &quot;^/api/(.*)$ /$1 break;<code>&lt;/font&gt;</code> 路径重写</li> <li><code>rewrite</code>语法: <code>rewrite</code>(关键字) + <code>&lt;regex&gt;</code>(正则) + <code>&lt;replacement&gt;</code>(替代内容) + <code>[flag]</code>;(flag标记)</li> <li><code>proxy_connect_timeout</code>后端服务器连接的超时时间_发起握手等候响应超时时间</li> <li><code>proxy_read_timeout</code> 该指令设置与代理服务器的读超时时间</li> <li><code>rewrite &quot;^/api/(.*)$&quot; /$1 break;</code><br>配置说明:
<ul><li><code>rewrite</code>为固定关键字，表示开始进行rewrite匹配规则</li> <li><code>^/api/(.*)$</code> 这是一个正则表达式，匹配含有<code>/api/</code>的域名和后面的路径地址</li> <li><code>/$1</code> 是取自 <code>^/api/(.*)$</code>部分()里的内容, 匹配成功后跳转到的URL</li> <li><code>break</code> 本条规则匹配完成即终止，不再匹配后面的任何规则</li></ul></li></ul></li></ul> <h2 id="vue打包部署后刷新404问题"><a href="#vue打包部署后刷新404问题" class="header-anchor">#</a> Vue打包部署后刷新404问题</h2> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>处理Vue部署history模式刷新404问题</p></div> <ul><li><p>原因分析<br>
浏览器地址栏  <code>http://localhost:8080/#/home/news</code>  带#号路径为hash模式, 不带#号的为history模式</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>hash工作模式中,  url路径<code>#</code>及其之后的路径字符串,这里就是<code>#/home/news</code>是hash值,  <font style="color:red;"><strong>hash值</strong></font>在http请求中, 不会带给服务器,  所以部署上线不会出现404问题; 然后history工作模式中, 所有路径在http中都会带给服务器, 服务器区分不开前端路由和后端路由, 服务器识别不了前端路由的时候, 刷新就会报404问题;</p></div></li> <li><p>解决思路</p></li></ul> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>解决问题的核心就是通过配置文件<font style="color:red;"><strong>区分开前端路由和后端路由</strong></font>; 找不到后端路由, 通过重定向, 访问<code>index.html</code></p></div> <ul><li>nginx解决方案</li></ul> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>location / <span class="token punctuation">{</span>
    root   /root<span class="token punctuation">;</span> // 项目根目录
    try_files <span class="token variable">$uri</span> <span class="token variable">$uri</span>/ @router<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

location @router <span class="token punctuation">{</span>
  rewrite ^.*$ /index.html last<span class="token punctuation">;</span>
  <span class="token comment"># 匹配所有  /index.html last;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li><p>配置分析
示例说明: <code>/root 项目根目录</code><br></p> <ul><li>理解: <code>try_files $uri $uri/ @aab</code></li></ul> <blockquote><p>@ 表示配置文件中预定义标记点</p></blockquote> <ul><li><code>try_files</code> 尝试读取文件, 它尝试读取的事静态文件</li> <li>第一个参数<code>$url</code> , 它是nginx的一个变量, 存放着用户访问的地址<div class="language-sh line-numbers-mode"><pre class="language-sh"><code>比如: 
<span class="token number">1</span>. http://www.xxx.com/index.html,  那么<span class="token variable">$uri</span>就是 /index
<span class="token number">2</span>. http://localhost:8080/home/news, 那么<span class="token variable">$uri</span>就是 /home/news
<span class="token number">3</span>. http://localhost/example, 那么<span class="token variable">$uri</span>就是 /example
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li>第二个参数<code>$uri/</code> 代表访问的是一个目录<div class="language-sh line-numbers-mode"><pre class="language-sh"><code>比如：
<span class="token number">1</span>. http://www.xxx.com/hello/test/ ，那么<span class="token variable">$uri</span>/就是 /hello/test/
<span class="token number">2</span>. http://localhost/example, 那么<span class="token variable">$url</span>就是 /example/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li>配置理解<div class="custom-block warning"><p class="custom-block-title">WARNING</p></div></li></ul> <p>当用户尝试请求 <code>http://localhost/example</code>时<br><br> <code>try_files</code> 尝试去网站根目录 ( <code>/root</code> ) 读取用户这个文件,  如果存在名为 <code>/root/example</code> (这个就是$uri文件, 第一个变量) 的文件, 就直接把这个文件的内容返回给用户;   如果不存在, 继续读取第二个变量<code>$uri/</code>, 增加了一个<code>/</code>, 也就是看 <code>/root/example</code>/ 这个目录是否存在, 如果存在, 这个目录直接返回给用户, 如果不存在, 直接跳转到第三个参数<code>@aab</code>, 这里就是通提供给预定义标记点, 跳转到下面的<code>@router</code>, 标记点<code>@router</code>和下面的<code>@router</code>保持一致</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>  location @router <span class="token punctuation">{</span>
    rewrite ^.*$ /index.html last<span class="token punctuation">;</span>  
  <span class="token comment">#     匹配所有 /index.html last;</span>
  <span class="token punctuation">}</span>
  <span class="token comment"># last标记 重写 url 后，会再从 server 走一遍匹配流程</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>:::</p> <ul><li><code>rewrite ^.*$ /index.html last;</code>:   匹配所有  /index.html last;  所有的<code>$url</code>替换成真实的url(/index.html),后, (last)再从server走一遍匹配流程, 就走到了http://localhost/index.html; 访问到了文件</li> <li>扩展: laravel伪静态<br>
如果都找不到, 就会 fall back 到 try_files 的最后一个选项 /index.php，发起一个内部 “子请求”，也就是相当于 nginx 发起一个 HTTP 请求到 http://localhost/index.php<div class="language-sh line-numbers-mode"><pre class="language-sh"><code>  try_files <span class="token variable">$uri</span> <span class="token variable">$uri</span>/ /index.php?<span class="token variable">$query_string</span><span class="token punctuation">;</span>   
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li></ul> <h2 id="后台启动任务"><a href="#后台启动任务" class="header-anchor">#</a> 后台启动任务</h2> <ul><li><p>背景<br>
当我们在终端启动服务或者训练模型时，启动命令往往会阻塞自己，即无法在终端继续输入，同时为了保证终端关闭不影响进程中断，需要在后台启动进程 ;</p></li> <li><p>命令</p> <ul><li>后台启动常用的命令:  <code>nohup command 2&gt;&amp;1 &amp; 或者 nohup command 2&gt;&gt;&amp;1 &amp;</code></li> <li>示例： <code>nohup python my.py &gt;&gt;/home/xxx/my.log 2&gt;&amp;1 &amp;</code></li> <li>在bash shell中：
<ul><li><code>0</code>：代表标准输入，即键盘输入的</li> <li><code>1</code>：代表标准输出，即输出到显示屏的内容</li> <li><code>2</code>：代表标准错误，即报错内容</li> <li><code>&gt;&gt;</code>: 代表追加, <code>&gt;</code>会让日志文件的内容清空</li> <li><code>nohup</code>: 表示不挂断地执行命令，即便退出当前终端。同时会将屏幕的标准输出追加到默认文件<code>nohup.out</code>文件</li> <li><code>&amp;</code>：表示在后台执行命令</li> <li><code>2&gt;&amp;1</code>: 不能用空格，代表将错误内容重定向到标准输出中。</li></ul></li></ul></li> <li><p>命令解析<br></p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p><font style="color:red;"><strong>假如有如下命令</strong></font>:<br> <code>nohup /usr/bin/php /www/wwwroot/school/artisan swoole &gt;&gt; /home/my.log 2&gt;&amp;1 &amp;</code></p></div></li> <li><p><code>nohup /usr/bin/php /www/wwwroot/school/artisan swoole</code> 表示php不间断低执行swoole脚本</p></li> <li><p><code>/www/wwwroot/school/artisan swoole &gt;&gt; /home/my.log</code>这部分等同于 <code>/www/wwwroot/school/artisan swoole 1&gt;&gt; /home/my.log</code>，即省略了标准输出1;</p></li> <li><p>上面命令可以拆解为:</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">nohup</span> /usr/bin/php /www/wwwroot/school/artisan swoole <span class="token operator"><span class="token file-descriptor important">1</span>&gt;&gt;</span> /home/my.log <span class="token operator">&amp;</span>
<span class="token function">nohup</span> /usr/bin/php /www/wwwroot/school/artisan swoole <span class="token operator"><span class="token file-descriptor important">2</span>&gt;&gt;</span> /home/my.log <span class="token operator">&amp;</span>

<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span>中的 <span class="token operator">&amp;</span> 是为了区分 <span class="token number">1</span> 是文件名 还是标准输出1 ，如果省略掉则变成了输出到文件1中
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>:::</p></li> <li><p>nohup不输出到文件</p> <ul><li>nohup启动服务时，会默认生成 nohup.out 文件，这样可能会占据相当一部分的磁盘空间，所以便会有一种需求 - 不让nohup 产生日志。</li> <li>其实是没办法不让 nohup 产生日志的，但是可以利用 linux 的 黑洞 /dev/null ，重定向到它的信息会消失，如果我们不需要保存程序运行时的所有信息时，就可以将信息重定向到 /dev/null 。</li> <li><font style="color:red;"><strong>示例如下</strong></font>:<div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">nohup</span> /usr/bin/php /www/wwwroot/school/artisan swoole <span class="token operator">&gt;</span> /dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li></ul> <h2 id="反向代理之后获取真实ip-php版本"><a href="#反向代理之后获取真实ip-php版本" class="header-anchor">#</a> 反向代理之后获取真实ip(php版本)</h2> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>使用VUE前后端分离开发, 后端使用Laravel框架, 想要获取到用户的真实IP地址;</p> <p>因为分离开发不同源跨域问题 所以只能进行前端Nginx反向代理; 反向代理之后, 发现返回的只是代理服务器的IP地址。</p></div> <p><font color="blue"><strong>在前端Nginx代理配置写入</strong></font></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># 在前端Nginx代理配置写入</span>
location /web <span class="token punctuation">{</span>
    proxy_pass http://127.0.0.1:9099<span class="token punctuation">;</span>
    proxy_connect_timeout <span class="token number">600</span><span class="token punctuation">;</span>
    proxy_read_timeout <span class="token number">600</span><span class="token punctuation">;</span>
    rewrite <span class="token string">&quot;^/web/(.*)$&quot;</span> /<span class="token variable">$1</span> <span class="token builtin class-name">break</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
<span class="token comment"># 新增配置下面两行</span>
proxy_set_header X-Forwarded-For <span class="token variable">$remote_addr</span><span class="token punctuation">;</span>
proxy_set_header X-Forwarded-For <span class="token variable">$proxy_add_x_forwarded_for</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><font color="blue"><strong>插入之后进行Nginx重启发现warning错误</strong></font></p> <div class="custom-block danger"><p class="custom-block-title">DANGER</p> <p>Starting nginx: nginx: [warn] could not build optimal proxy_headers_hash, you should increase either proxy_headers_hash_max_size: 512 or proxy_headers_hash_bucket_size: 64;</p> <p>ignoring proxy_headers_hash_bucket_size</p></div> <p><font color="blue"><strong>在nginx.conf配置文件里面的http代码块里面加入下面配置代码解决</strong></font></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>http<span class="token punctuation">{</span>
<span class="token punctuation">..</span>.
<span class="token comment"># 新加入配置代码</span>
proxy_headers_hash_max_size <span class="token number">51200</span><span class="token punctuation">;</span>
proxy_headers_hash_bucket_size <span class="token number">6400</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><font color="blue"><strong>真实的ip地址就是:  <code>$_SERVER['HTTP_X_FORWARDED_FOR']</code></strong></font> 。</p> <h2 id="常用linux命令"><a href="#常用linux命令" class="header-anchor">#</a> 常用linux命令</h2> <h3 id="ls命令"><a href="#ls命令" class="header-anchor">#</a> ls命令</h3> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>用于显示指定工作目录下之内容（列出目前工作目录所含之文件及子目录)。</p></div> <p><font color="blue"><strong>语法: </strong></font></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">ls</span> <span class="token punctuation">[</span>-alrtAFR<span class="token punctuation">]</span> <span class="token punctuation">[</span>name<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>-a 显示所有文件及目录 (. 开头的隐藏文件也会列出)</li> <li>-l 除文件名称外，亦将文件型态、权限、拥有者、文件大小等资讯详细列出</li> <li>-r 将文件以相反次序显示(原定依英文字母次序)</li> <li>-t 将文件依建立时间之先后次序列出</li> <li>-A 同 -a ，但不列出 &quot;.&quot; (目前目录) 及 &quot;..&quot; (父目录)</li> <li>-F 在列出的文件名称后加一符号；例如可执行档则加 &quot;*&quot;, 目录则加 &quot;/&quot;</li> <li>-R 若目录下有文件，则以下之文件亦皆依序列出</li></ul> <p><font color="blue"><strong>按照时间升序显示文件信息:</strong></font></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">ls</span> <span class="token parameter variable">-lrt</span> --full-time
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><font color="blue"><strong>按照时间降序显示文件信息(最新修改的排在前面):</strong></font></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">ls</span> <span class="token parameter variable">-lt</span> --full-time
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="top命令"><a href="#top命令" class="header-anchor">#</a> top命令</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>root@iZjalzfbm2offnZ:/wwwroot<span class="token comment"># top</span>
<span class="token function">top</span> - <span class="token number">10</span>:33:18 up <span class="token number">184</span> days, <span class="token number">17</span>:19,  <span class="token number">1</span> user,  load average: <span class="token number">0.11</span>, <span class="token number">0.09</span>, <span class="token number">0.23</span>
Tasks: <span class="token number">506</span> total,   <span class="token number">1</span> running, <span class="token number">505</span> sleeping,   <span class="token number">0</span> stopped,   <span class="token number">0</span> zombie
%Cpu<span class="token punctuation">(</span>s<span class="token punctuation">)</span>:  <span class="token number">1.0</span> us,  <span class="token number">1.0</span> sy,  <span class="token number">0.0</span> ni, <span class="token number">98.0</span> id,  <span class="token number">0.0</span> wa,  <span class="token number">0.0</span> hi,  <span class="token number">0.0</span> si,  <span class="token number">0.0</span> st
MiB Mem <span class="token builtin class-name">:</span>   <span class="token number">3936.1</span> total,    <span class="token number">400.0</span> free,   <span class="token number">1066.8</span> used,   <span class="token number">2469.4</span> buff/cache
MiB Swap:   <span class="token number">4096.0</span> total,    <span class="token number">658.5</span> free,   <span class="token number">3437.5</span> used.   <span class="token number">2590.7</span> avail Mem 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><font color="red"><strong>第一行:</strong></font>
当前时间，系统运行时间，登录用户数量，平均负载（分别在5，10，15分钟内)</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">top</span> - <span class="token number">10</span>:33:18 up <span class="token number">184</span> days, <span class="token number">17</span>:19,  <span class="token number">1</span> user,  load average: <span class="token number">0.11</span>, <span class="token number">0.09</span>, <span class="token number">0.23</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>当前时间是10:33:18</li> <li>系统运行了184天,17小时19分</li> <li>当前登录用户的数量: 1个用户</li> <li>相应最近5、10和15分钟内的平均负载为 0.11, 0.09, 0.23</li></ul> <p><font color="red"><strong>第二行:</strong></font>
显示了系统的进程总数，后面是相应的状态下的进程</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>Tasks: <span class="token number">506</span> total,   <span class="token number">1</span> running, <span class="token number">505</span> sleeping,   <span class="token number">0</span> stopped,   <span class="token number">0</span> zombie
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>一共506个进程</li> <li>1个是running状态进程</li> <li>505个sleeping状态进程</li> <li>0个stopped状态进程</li> <li>0个zombie状态进程, 也叫僵尸进程, 就是，这个进程其实已经结束了，它仅仅在进程列表中保留一个位置，记载该进程的状态信息等，僵尸进程不再占有内存空间，没有可执行程序，也不能被调用。这个进程中存储着进程的各种信息，占用cpu啊，运行时间之类的。这个进程会被其父进程收集它的信息。</li></ul> <p><font color="red"><strong>第三行:</strong></font>
显示cpu的各种信息</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>%Cpu<span class="token punctuation">(</span>s<span class="token punctuation">)</span>:  <span class="token number">1.0</span> us,  <span class="token number">1.0</span> sy,  <span class="token number">0.0</span> ni, <span class="token number">98.0</span> id,  <span class="token number">0.0</span> wa,  <span class="token number">0.0</span> hi,  <span class="token number">0.0</span> si,  <span class="token number">0.0</span> st
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>us：用户空间占cpu百分比</li> <li>sy：内核空间占cpu百分比</li> <li>ni：用户进程空间内改变过优先级的进程占用cpu百分比</li> <li>id：空闲cpu百分比</li> <li>wa：等待输入输出的cpu时间百分比</li> <li>hi：硬中断（处理硬件中断的cpu时间）</li> <li>si：软中断（处理软件中断的cpu时间）</li></ul> <p><font color="red"><strong>第四,五行:</strong></font>
内存使用, 第四行是物理内存使用, 第五行是虚拟内存使用(交换空间)。</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>MiB Mem <span class="token builtin class-name">:</span>   <span class="token number">3936.1</span> total,    <span class="token number">400.0</span> free,   <span class="token number">1066.8</span> used,   <span class="token number">2469.4</span> buff/cache
MiB Swap:   <span class="token number">4096.0</span> total,    <span class="token number">658.5</span> free,   <span class="token number">3437.5</span> used.   <span class="token number">2590.7</span> avail Mem 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>物理内存:  全部可用内存(total);   空闲内存(free);   已使用内存(used);   缓存内存(buff/cache)<br>
虚拟内存:  全部可用内存(total);   空闲内存(free);   已使用内存(used);   缓冲交换空间(avail Mem)</p> <p><font color="red"><strong>字段/列</strong></font></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code> PID   <span class="token environment constant">USER</span>     PR    NI    VIRT    RES    SHR     S   %CPU   %MEM      TIME+           COMMAND                                                                                                                                                                 
<span class="token number">1131801</span> root    <span class="token number">10</span>   <span class="token parameter variable">-10</span>   <span class="token number">157164</span>   <span class="token number">59152</span>  <span class="token number">10332</span>   S   <span class="token number">2.3</span>    <span class="token number">1.5</span>     <span class="token number">908</span>:26.95          AliYunDun                                                                                                                                                               
 <span class="token number">743108</span> root    <span class="token number">20</span>   <span class="token number">0</span>     <span class="token number">1278484</span>  <span class="token number">46284</span>  <span class="token number">8984</span>    S   <span class="token number">0.7</span>    <span class="token number">1.1</span>     <span class="token number">991</span>:45.21          python3                                                                                                                                                                 
<span class="token number">2712198</span> root    <span class="token number">20</span>   <span class="token number">0</span>     <span class="token number">658016</span>   <span class="token number">58448</span>  <span class="token number">9996</span>    S   <span class="token number">0.7</span>    <span class="token number">1.5</span>     <span class="token number">554</span>:13.99          python3 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>PID   进程ID，进程的唯一标识符</li> <li>USER  进程所有者的实际用户名</li> <li>PR    进程的调度优先级。这个字段的一些值是’rt’。这意味这这些进程运行在实时态。</li> <li>NI    进程的nice值（优先级）。越小的值意味着越高的优先级。</li> <li>VIRT  进程使用的虚拟内存。</li> <li>RES   驻留内存大小。驻留内存是任务使用的非交换物理内存大小。</li> <li>SHR   SHR是进程使用的共享内存。</li> <li>S     这个是进程的状态。它有以下不同的值:
<ul><li>D – 不可中断的睡眠态。</li> <li>R – 运行态</li> <li>S – 睡眠态</li> <li>T – 被跟踪或已停止</li> <li>Z – 僵尸态</li></ul></li> <li>%CPU 自从上一次更新时到现在任务所使用的CPU时间百分比。</li> <li>%MEM  进程使用的可用物理内存百分比。</li> <li>TIME+ 任务启动后到现在所使用的全部CPU时间，精确到百分之一秒。</li> <li>COMMAND 运行进程所使用的命令。</li></ul> <h2 id="nginx代理之后-访问不到静态资源"><a href="#nginx代理之后-访问不到静态资源" class="header-anchor">#</a> nginx代理之后, 访问不到静态资源</h2> <p>nginx配置修改：配置静态文件的映射</p> <div class="language-conf line-numbers-mode"><pre class="language-text"><code>location ~ .*\.(gif|jpg|jpeg|png|bmp|swf)$
{
    # 图片代理地址
    proxy_pass http://localhost:1111;  
}
location ~ .*\.(js|css)?$
{
    # js/css
	proxy_pass http://www.xxx.com:8978;
}
	
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">6/9/2022, 10:06:28 PM</span></div></footer> <!----> </main></div><div class="global-ui"><!----><!----><!----></div></div>
    <script src="/lhyblog/assets/js/app.5d93db53.js" defer></script><script src="/lhyblog/assets/js/2.8d81c5f1.js" defer></script><script src="/lhyblog/assets/js/23.347d7883.js" defer></script><script src="/lhyblog/assets/js/3.4aea83a5.js" defer></script>
  </body>
</html>
